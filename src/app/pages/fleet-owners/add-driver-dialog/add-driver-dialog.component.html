<h2 mat-dialog-title class="text-xl font-semibold text-gray-800">
  Assign a Driver
</h2>

<mat-dialog-content class="space-y-6 pt-2 pb-4 px-1">

  <!-- Search Input -->
  <mat-form-field appearance="outline" class="w-full">
    <mat-label>Search by name or email</mat-label>
    <input
      matInput
      placeholder="e.g. John Doe or john@email.com"
      [(ngModel)]="searchQuery"
      (input)="filterDrivers()"
    />
    <button mat-icon-button matSuffix *ngIf="searchQuery" (click)="clearSearch()" aria-label="Clear">
      <mat-icon>close</mat-icon>
    </button>
  </mat-form-field>

  <!-- Driver Dropdown -->
  <mat-form-field appearance="fill" class="w-full">
    <mat-label>Select Driver</mat-label>
    <mat-select [formControl]="selectedDriverEmail">
      <mat-option *ngFor="let driver of filteredDrivers" [value]="driver.email">
        <div class="flex flex-col">
          <span class="font-medium">{{ driver.fullName }}</span>
          <span class="text-sm text-gray-500">{{ driver.email }}</span>
        </div>
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Spinner or Error -->
  <div *ngIf="isLoading" class="flex justify-center">
    <mat-spinner diameter="30"></mat-spinner>
  </div>
  <p *ngIf="loadError" class="text-red-600 text-sm text-center">
    Failed to load drivers. Please try again later.
  </p>

</mat-dialog-content>

<mat-dialog-actions align="end" class="px-4 pb-3">
  <button mat-button (click)="dialogRef.close()" class="mr-2">Cancel</button>
  <button
    mat-flat-button
    color="primary"
    (click)="assignDriver()"
    [disabled]="!selectedDriverEmail.value || isSubmitting"
  >
    <mat-icon class="mr-1" *ngIf="!isSubmitting">person_add</mat-icon>
    <mat-spinner *ngIf="isSubmitting" diameter="20"></mat-spinner>
<span *ngIf="!isSubmitting" style="color: #3f51b5; font-weight: 600;">Assign Driver</span>

  </button>
</mat-dialog-actions>
